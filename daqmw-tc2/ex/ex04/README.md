(テーマ)char bufferからの数値の取り出し
=======================================

デコードのときに必要になるのでchar buf[1024]のようなバッファからの
数値の取り出し方法を習得する。

下のようなバッファからint, shortを取り出すには次のようなコードを
書けばよい。

    /*
     *  0      1      2      3      4      5      6      7
     * +------+------+------+------+------+------+------+------+
     * | 0x01 | 0x23 | 0x45 | 0x67 | 0x89 | 0xab | 0xcd | 0xef |
     * +------+------+------+------+------+------+------+------+
     * <---------------------------><------------><------------>
     *              int                 short         short
     */

    unsigned char  buf[8];  // データが入っているとする
    unsigned int   *int_p;  // int (4バイト整数へのポインタ)
    unsigned short *short_p // short (2バイト整数へのポインタ)
    int   x;
    short y;

    int_p = (unsigned int *)&buf[0]; // buf[0]のアドレスをセット。型が違うのでキャスト(unsigned int *)が必要
    x = *int_p;                      // *を付けると値が取り出せるのでxに代入している
                                     // ネットワークバイトオーダからホストオーダに変更する必要があるなら
                                     // x = ntohl(x); とする。

    // shortも同様
    short_p = (unsigned short *)&buf[4]; // buf[4]のアドレスをセット
    y = *short_p;                    // ネットワークバイトオーダからホストオーダに変更する必要があるなら
                                     // y = ntohs(y); とする。
    

コードの変更
------------

     buf[6] buf[7]のshortの取り出しができるよう、コードを修正すること。
